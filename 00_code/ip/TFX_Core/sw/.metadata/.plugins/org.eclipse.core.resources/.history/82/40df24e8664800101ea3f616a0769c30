
#include "xparameters.h"
#include "xscugic.h"

#define INTC_DEVICE_ID  XPAR_PS7_SCUGIC_0_DEVICE_ID

#define WRITE_DONE_INTR XPAR_FABRIC_TFX_CORE_0_CWT_DONE_INTR


int SetupInterruptSystem(XScuGic *IntcInstancePtr)
{
	// Register interrupt handler using FreeRTOS-aware function
	xPortInstallInterruptHandler(WRITE_DONE_INTR, WriteDoneIntr_Handler, NULL);
	xPortInstallInterruptHandler(GPIO_INTR, GPIOIntr_Handler, &GPIOInst);

	// Enable the interrupt line
	vPortEnableInterrupt(WRITE_DONE_INTR);
	vPortEnableInterrupt(GPIO_INTR);

	return XST_SUCCESS;
}

